<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pong - Dois Jogadores</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    canvas {
      background: #000;
      display: block;
      margin: auto;
      border: 3px solid #ccc;
    }
  </style>
</head>
<body class="bg-light d-flex flex-column align-items-center py-4">
  <h1 class="mb-4">Pong - Dois Jogadores</h1>

  <div class="d-flex justify-content-between w-50 mb-3">
    <div class="text-success fw-bold fs-4">Jogador 1: <span id="score1">0</span></div>
    <div class="text-danger fw-bold fs-4">Jogador 2: <span id="score2">0</span></div>
  </div>

  <canvas id="gameCanvas" width="600" height="400"></canvas>

  <p class="mt-4 text-muted text-center">Jogador 1: Teclas W (cima) e S (baixo) | Jogador 2: Teclas ↑ e ↓</p>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let paddleHeight = 80, paddleWidth = 10;
    let paddle1Y = canvas.height / 2 - paddleHeight / 2;
    let paddle2Y = canvas.height / 2 - paddleHeight / 2;
    let paddleSpeed = 6;

    let ballX = canvas.width / 2, ballY = canvas.height / 2;
    let ballSpeedX = 4, ballSpeedY = 4;
    const ballRadius = 8;

    let score1 = 0, score2 = 0;
    const score1El = document.getElementById('score1');
    const score2El = document.getElementById('score2');

    let keysPressed = {};

    document.addEventListener('keydown', (e) => {
      keysPressed[e.key] = true;
    });

    document.addEventListener('keyup', (e) => {
      keysPressed[e.key] = false;
    });

    function drawPaddle(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, paddleWidth, paddleHeight);
    }

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
      ctx.fillStyle = 'white';
      ctx.fill();
      ctx.closePath();
    }

    function resetBall() {
      ballX = canvas.width / 2;
      ballY = canvas.height / 2;
      ballSpeedX *= -1;
      ballSpeedY = (Math.random() * 4 - 2);
    }

    function update() {
      // Mover paddles
      if (keysPressed['w'] && paddle1Y > 0) paddle1Y -= paddleSpeed;
      if (keysPressed['s'] && paddle1Y + paddleHeight < canvas.height) paddle1Y += paddleSpeed;

      if (keysPressed['ArrowUp'] && paddle2Y > 0) paddle2Y -= paddleSpeed;
      if (keysPressed['ArrowDown'] && paddle2Y + paddleHeight < canvas.height) paddle2Y += paddleSpeed;

      // Mover bola
      ballX += ballSpeedX;
      ballY += ballSpeedY;

      // Colisão com topo/baixo
      if (ballY - ballRadius < 0 || ballY + ballRadius > canvas.height) {
        ballSpeedY *= -1;
      }

      // Colisão com paddle esquerdo
      if (
        ballX - ballRadius < paddleWidth &&
        ballY > paddle1Y && ballY < paddle1Y + paddleHeight
      ) {
        ballSpeedX *= -1;
        ballX = paddleWidth + ballRadius; // Evitar bug de colisão
      }

      // Colisão com paddle direito
      if (
        ballX + ballRadius > canvas.width - paddleWidth &&
        ballY > paddle2Y && ballY < paddle2Y + paddleHeight
      ) {
        ballSpeedX *= -1;
        ballX = canvas.width - paddleWidth - ballRadius;
      }

      // Pontuação
      if (ballX < 0) {
        score2++;
        score2El.textContent = score2;
        resetBall();
      }

      if (ballX > canvas.width) {
        score1++;
        score1El.textContent = score1;
        resetBall();
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPaddle(0, paddle1Y, 'green');
      drawPaddle(canvas.width - paddleWidth, paddle2Y, 'red');
      drawBall();
    }

    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>
